import{d as f,g as U,a as y,v as _,_ as h,c,b as s,y as A,A as j,o as p,t as C,$ as V,w as v,e as b,C as B,D as O,q as S,r as a,x as r,E as $}from"./index-bpNO_8uP.js";import{S as R,a as H}from"./SectionHeader-C4vtWxD-.js";import{S as d}from"./sweetalert2.esm.all-DzlfzZPw.js";const M=f({emits:["view","refresh","update"],props:{themes:{default:{},type:Object}},methods:{onView(e){this.$emit("view",{data:e})},onUpdate(e){this.$emit("update",{data:e})},async onDelete(e){await U().then(async t=>{t.role==1?d.fire({title:"Confirmation",text:"Delete "+(e==null?void 0:e.name)+"?",showCancelButton:!0,confirmButtonText:"Delete",icon:"question"}).then(async o=>{o.isConfirmed&&await y.get(_().api_main+"themes/delete?dataid="+(e==null?void 0:e.dataid)).then(async i=>{var l,m,n;(l=i.data)!=null&&l.success?d.fire({title:"Success",text:(m=i.data)==null?void 0:m.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):d.fire({title:"Warning",text:(n=i.data)==null?void 0:n.message,icon:"warning"})})}):d.fire({title:"Action denied",text:"Only administrator level has permission to delete",icon:"error"})})}}}),N={class:"card"},W={class:"table-responsive text-nowrap"},q={class:"table"},L=["onClick"],F=["onClick"],z=["onClick"];function G(e,t,o,i,l,m){return p(),c("div",N,[t[1]||(t[1]=s("h5",{class:"card-header"},"Manage Theme",-1)),s("div",W,[s("table",q,[t[0]||(t[0]=s("thead",null,[s("tr",null,[s("th",{style:{width:"50px"}},"No"),s("th",null,"Theme"),s("th",{style:{width:"100px"}},"View"),s("th",{style:{width:"100px"}},"Update"),s("th",{style:{width:"100px"}},"Delete")])],-1)),s("tbody",null,[(p(!0),c(A,null,j(e.themes,(n,u)=>(p(),c("tr",{key:u},[s("td",null,C(u+1),1),s("td",null,C(n==null?void 0:n.name),1),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:w=>e.onView(n)},"View",8,L)]),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:w=>e.onUpdate(n)},"Update",8,F)]),s("td",null,[s("button",{class:"btn btn-danger btn-sm",onClick:w=>e.onDelete(n)},"Delete",8,z)])]))),128))])])])])}const I=h(M,[["render",G]]),J=f({props:{theme:{default:{},type:Object}}}),K={class:"card"},P={class:"card-body"},Q={class:"form-group mt-4"},X=["value"],Y={class:"form-group mt-4"},Z=["value"];function ee(e,t,o,i,l,m){return p(),c("div",K,[t[2]||(t[2]=s("h5",{class:"card-header"},"View Theme",-1)),s("div",P,[s("div",Q,[t[0]||(t[0]=s("label",null,"Theme name",-1)),s("input",{value:e.theme.name,type:"text",class:"form-control form-control-lg bg-white",readonly:""},null,8,X)]),s("div",Y,[t[1]||(t[1]=s("label",null,"Description",-1)),s("textarea",{value:e.theme.description,class:"form-control form-control-lg bg-white",readonly:""},null,8,Z)])])])}const te=h(J,[["render",ee]]),se=f({emits:["refresh"],data(){return{form:{name:"",description:""}}},methods:{async saveTheme(){await y.get(_().api_main+"themes/add?"+V.param(this.form)).then(async e=>{var t,o,i;(t=e.data)!=null&&t.success?d.fire({title:"Success",text:(o=e.data)==null?void 0:o.message,icon:"success"}).then(async()=>{this.form.name="",this.form.description="",this.$emit("refresh")}):d.fire({title:"Warning",text:(i=e.data)==null?void 0:i.message,icon:"warning"})})}}}),ne={class:"card"},oe={class:"card-body"},ie={class:"form-group mt-4"},ae={class:"form-group mt-4"},re={class:"d-flex justify-content-end mt-4"};function de(e,t,o,i,l,m){return p(),c("div",ne,[t[5]||(t[5]=s("h5",{class:"card-header"},"Add Theme",-1)),s("div",oe,[s("div",ie,[t[3]||(t[3]=s("label",null,"Theme name",-1)),v(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.name=n),type:"text",class:"form-control form-control-lg"},null,512),[[b,e.form.name]])]),s("div",ae,[t[4]||(t[4]=s("label",null,"Description",-1)),v(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.description=n),class:"form-control form-control-lg"},null,512),[[b,e.form.description]])]),s("div",re,[s("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=n=>e.saveTheme())},"Save")])])])}const le=h(se,[["render",de]]),me=f({emits:["refresh"],props:{theme:{default:{},type:Object}},data(){return{form:{dataid:"",name:"",description:""}}},methods:{async updateTheme(){await y.get(_().api_main+"themes/update?"+V.param(this.form)).then(async e=>{var t,o,i;(t=e.data)!=null&&t.success?d.fire({title:"Success",text:(o=e.data)==null?void 0:o.message,icon:"success"}).then(async()=>{this.form.name="",this.form.description="",this.$emit("refresh")}):d.fire({title:"Warning",text:(i=e.data)==null?void 0:i.message,icon:"warning"})})}},watch:{theme:function(){var e,t,o;this.form.dataid=(e=this.theme)==null?void 0:e.dataid,this.form.name=(t=this.theme)==null?void 0:t.name,this.form.description=(o=this.theme)==null?void 0:o.description}}}),ce={class:"card"},pe={class:"card-body"},fe={class:"form-group mt-4"},he={class:"form-group mt-4"},ue={class:"d-flex justify-content-end mt-4"};function we(e,t,o,i,l,m){return p(),c("div",ce,[t[5]||(t[5]=s("h5",{class:"card-header"},"Update Theme",-1)),s("div",pe,[s("div",fe,[t[3]||(t[3]=s("label",null,"Theme name",-1)),v(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.name=n),type:"text",class:"form-control form-control-lg"},null,512),[[b,e.form.name]])]),s("div",he,[t[4]||(t[4]=s("label",null,"Description",-1)),v(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.description=n),class:"form-control form-control-lg"},null,512),[[b,e.form.description]])]),s("div",ue,[s("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=n=>e.updateTheme())},"Update")])])])}const $e=h(me,[["render",we]]),ve=f({components:{CardEventView:te,Swiper:O,SwiperSlide:B,CardEventUpdate:$e,CardEventAdd:le,TableEvents:I,SectionSidebar:H,SectionHeader:R},data(){return{admin:{},swiper:{},themes:{},view:{theme:{}},update:{theme:{}}}},methods:{onSwiper(e){this.swiper=e},swipeToView(e){console.log(S(e)),this.view.theme=e.data,this.swiper.slideTo(0)},swipeToUpdate(e){this.update.theme=e.data,this.swiper.slideTo(2)},swipeToAdd(){this.swiper.slideTo(1)},async fetchThemes(){await y.get(_().api_main+"themes/fetchAll").then(async e=>{this.themes=e.data})}},async mounted(){await U().then(async e=>{e?(this.admin=e,await this.fetchThemes().then(async()=>{console.log("Theme:",S(this.$data))})):this.$router.replace("/")})}}),be={class:"layout-wrapper layout-content-navbar"},ye={class:"layout-container"},_e={class:"layout-page"},ge={class:"content-wrapper"},Te={class:"container-xxl flex-grow-1 container-p-y"},Ce={class:"d-flex justify-content-between align-items-center py-3"},Se={class:"d-flex"},Ue={class:"row"},Ve={class:"col-sm-12 col-md-5"},Ee={class:"col-sm-12 col-md-7"};function ke(e,t,o,i,l,m){const n=r("SectionSidebar"),u=r("SectionHeader"),w=r("CardEventView"),g=r("swiper-slide"),E=r("CardEventAdd"),k=r("CardEventUpdate"),x=r("swiper"),D=r("TableEvents");return p(),c("div",be,[s("div",ye,[a(n),s("div",_e,[a(u,{onOpen_notif:t[0]||(t[0]=()=>{e.$emit("open_notif")})}),s("div",ge,[s("div",Te,[s("div",Ce,[t[5]||(t[5]=s("h4",{class:"fw-bold py-3"},"Manage Theme",-1)),s("div",Se,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=T=>e.swipeToAdd())},"Add Theme")])]),s("div",Ue,[s("div",Ve,[a(x,{"slides-per-view":1,"space-between":50,onSwiper:e.onSwiper},{default:$(()=>[a(g,{class:"swiper-no-swiping"},{default:$(()=>[a(w,{theme:e.view.theme},null,8,["theme"])]),_:1}),a(g,{class:"swiper-no-swiping"},{default:$(()=>[a(E,{onRefresh:t[2]||(t[2]=T=>e.fetchThemes())})]),_:1}),a(g,{class:"swiper-no-swiping"},{default:$(()=>[a(k,{onRefresh:t[3]||(t[3]=T=>e.fetchThemes()),theme:e.update.theme},null,8,["theme"])]),_:1})]),_:1},8,["onSwiper"])]),s("div",Ee,[a(D,{themes:e.themes,onView:e.swipeToView,onRefresh:t[4]||(t[4]=T=>e.fetchThemes()),onUpdate:e.swipeToUpdate},null,8,["themes","onView","onUpdate"])])])])])])])])}const je=h(ve,[["render",ke]]);export{je as default};
