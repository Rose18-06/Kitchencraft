import{d as w,g as U,a as b,v as C,_ as $,c as p,b as s,y as x,A as j,o as c,t as S,w as f,e as u,$ as V,q as M,C as R,D as B,r,x as l,E as y}from"./index-bpNO_8uP.js";import{S as O,a as H}from"./SectionHeader-C4vtWxD-.js";import{S as d}from"./sweetalert2.esm.all-DzlfzZPw.js";const N=w({emits:["view","update","refresh"],props:{categories:{default:{},type:Object}},methods:{onView(e){this.$emit("view",{category:e})},onUpdate(e){this.$emit("update",{category:e})},async onDelete(e){await U().then(async t=>{(t==null?void 0:t.role)==1?d.fire({title:"Confirmation",text:"Delete "+(e==null?void 0:e.name)+"?",icon:"question",showCancelButton:!0,confirmButtonText:"Delete"}).then(async i=>{i.isConfirmed&&await b.get(C().api_main+"menu_categories/delete?dataid="+(e==null?void 0:e.dataid)).then(async n=>{var a,m,o;(a=n.data)!=null&&a.success?d.fire({title:"Success",text:(m=n.data)==null?void 0:m.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):d.fire({title:"Warning",text:(o=n.data)==null?void 0:o.message,icon:"warning"})})}):d.fire({title:"Action denied",text:"Only administrator level has permission to delete",icon:"error"})})}}}),W={class:"card"},q={class:"table-responsive text-nowrap"},E={class:"table"},L={class:"text-wrap"},F=["onClick"],I=["onClick"],z=["onClick"];function G(e,t,i,n,a,m){return c(),p("div",W,[t[1]||(t[1]=s("h5",{class:"card-header"},"Manage Category",-1)),s("div",q,[s("table",E,[t[0]||(t[0]=s("thead",null,[s("tr",null,[s("th",{style:{width:"50px"}},"No."),s("th",null,"Category"),s("th",null,"Description"),s("th",{style:{width:"100px"}},"View"),s("th",{style:{width:"100px"}},"Update"),s("th",{style:{width:"100px"}},"Delete")])],-1)),s("tbody",null,[(c(!0),p(x,null,j(e.categories,(o,h)=>(c(),p("tr",{key:h},[s("td",null,S(h+1),1),s("td",null,S(o==null?void 0:o.name),1),s("td",L,[s("small",null,S(o==null?void 0:o.description),1)]),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:g=>e.onView(o)},"View",8,F)]),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:g=>e.onUpdate(o)},"Update",8,I)]),s("td",null,[s("button",{class:"btn btn-danger btn-sm",onClick:g=>e.onDelete(o)},"Delete",8,z)])]))),128))])])])])}const J=$(N,[["render",G]]),K=w({props:{form:{default:{},type:Object}}}),P={class:"card"},Q={class:"card-body"},X={class:"form-group mt-4"},Y={class:"form-group mt-4"};function Z(e,t,i,n,a,m){return c(),p("div",P,[t[4]||(t[4]=s("h5",{class:"card-header"},"View Theme",-1)),s("div",Q,[s("div",X,[t[2]||(t[2]=s("label",null,"Category name",-1)),f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o),type:"text",class:"form-control form-control-lg bg-white",readonly:""},null,512),[[u,e.form.name]])]),s("div",Y,[t[3]||(t[3]=s("label",null,"Description",-1)),f(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.description=o),class:"form-control form-control-lg bg-white",readonly:""},null,512),[[u,e.form.description]])])])])}const ee=$(K,[["render",Z]]),te=w({data(){return{form:{name:"",description:""}}},methods:{async createCategory(){await b.get(C().api_main+"menu_categories/create?"+V.param(this.form)).then(async e=>{var t,i,n;(t=e.data)!=null&&t.success?d.fire({title:"Success",text:(i=e.data)==null?void 0:i.message,icon:"success"}).then(async()=>{this.form.name="",this.form.description="",this.$emit("refresh")}):d.fire({title:"Warning",text:(n=e.data)==null?void 0:n.message,icon:"warning"})})}}}),se={class:"card"},oe={class:"card-body"},ne={class:"form-group mt-4"},ie={class:"form-group mt-4"},ae={class:"d-flex justify-content-end mt-4"};function re(e,t,i,n,a,m){return c(),p("div",se,[t[5]||(t[5]=s("h5",{class:"card-header"},"Add Theme",-1)),s("div",oe,[s("div",ne,[t[3]||(t[3]=s("label",null,"Category name",-1)),f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o),type:"text",class:"form-control form-control-lg"},null,512),[[u,e.form.name]])]),s("div",ie,[t[4]||(t[4]=s("label",null,"Description",-1)),f(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.description=o),class:"form-control form-control-lg"},null,512),[[u,e.form.description]])]),s("div",ae,[s("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=o=>e.createCategory())},"Save")])])])}const le=$(te,[["render",re]]),de=w({emit:["refresh"],props:{form:{default:{},type:Object}},methods:{async saveChanges(){const e=C().api_main+"menu_categories/update?"+V.param(this.form);console.log("URI:",e),await b.get(e).then(async t=>{var i,n,a;console.log("Res:",M(t)),(i=t.data)!=null&&i.success?d.fire({title:"Success",text:(n=t.data)==null?void 0:n.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):d.fire({title:"Warning",text:(a=t.data)==null?void 0:a.message,icon:"warning"})})}}}),me={class:"card"},pe={class:"card-body"},ce={class:"form-group mt-4"},fe={class:"form-group mt-4"},ue={class:"d-flex justify-content-end mt-4"};function we(e,t,i,n,a,m){return c(),p("div",me,[t[5]||(t[5]=s("h5",{class:"card-header"},"Update Theme",-1)),s("div",pe,[s("div",ce,[t[3]||(t[3]=s("label",null,"Category name",-1)),f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o),type:"text",class:"form-control form-control-lg"},null,512),[[u,e.form.name]])]),s("div",fe,[t[4]||(t[4]=s("label",null,"Description",-1)),f(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.description=o),class:"form-control form-control-lg"},null,512),[[u,e.form.description]])]),s("div",ue,[s("button",{class:"btn btn-primary w-25",onClick:t[2]||(t[2]=o=>e.saveChanges())},"Save")])])])}const $e=$(de,[["render",we]]),he=w({components:{CardMenuCategoryView:ee,Swiper:B,SwiperSlide:R,CardMenuCategoryUpdate:$e,CardMenuCategoryAdd:le,TableMenus:J,SectionSidebar:H,SectionHeader:O},data(){return{admin:{},swiper:{},categories:{},form:{}}},methods:{onSwiper(e){this.swiper=e},swipeToView(e){this.form=e==null?void 0:e.category,this.swiper.slideTo(0)},swipeToUpdate(e){this.form=e==null?void 0:e.category,this.swiper.slideTo(2)},swipeToAdd(){this.swiper.slideTo(1)},async fetchAllCategory(){await b.get(C().api_main+"menu_categories/fetchAll").then(async e=>{this.categories=e.data})}},async mounted(){await U().then(async e=>{e?(this.admin=e,await this.fetchAllCategory().then(async()=>{console.log("Menu Category:",M(this.$data))})):this.$router.replace("/")})}}),ge={class:"layout-wrapper layout-content-navbar"},ye={class:"layout-container"},be={class:"layout-page"},Ce={class:"content-wrapper"},_e={class:"container-xxl flex-grow-1 container-p-y"},ve={class:"d-flex justify-content-between align-items-center py-3"},Se={class:"d-flex"},Ue={class:"row"},Ve={class:"col-sm-12 col-md-5"},Me={class:"col-sm-12 col-md-7"};function Te(e,t,i,n,a,m){const o=l("SectionSidebar"),h=l("SectionHeader"),g=l("CardMenuCategoryView"),_=l("swiper-slide"),T=l("CardMenuCategoryAdd"),A=l("CardMenuCategoryUpdate"),D=l("swiper"),k=l("TableMenus");return c(),p("div",ge,[s("div",ye,[r(o),s("div",be,[r(h,{onOpen_notif:t[0]||(t[0]=()=>{e.$emit("open_notif")})}),s("div",Ce,[s("div",_e,[s("div",ve,[t[5]||(t[5]=s("h4",{class:"fw-bold py-3"},"Manage Menu",-1)),s("div",Se,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=v=>e.swipeToAdd())},"Add Menu")])]),s("div",Ue,[s("div",Ve,[r(D,{"slides-per-view":1,"space-between":50,onSwiper:e.onSwiper},{default:y(()=>[r(_,{class:"swiper-no-swiping"},{default:y(()=>[r(g,{form:e.form},null,8,["form"])]),_:1}),r(_,{class:"swiper-no-swiping"},{default:y(()=>[r(T,{onRefresh:t[2]||(t[2]=v=>e.fetchAllCategory())})]),_:1}),r(_,{class:"swiper-no-swiping"},{default:y(()=>[r(A,{form:e.form,onRefresh:t[3]||(t[3]=v=>e.fetchAllCategory())},null,8,["form"])]),_:1})]),_:1},8,["onSwiper"])]),s("div",Me,[r(k,{categories:e.categories,onView:e.swipeToView,onUpdate:e.swipeToUpdate,onRefresh:t[4]||(t[4]=v=>e.fetchAllCategory())},null,8,["categories","onView","onUpdate"])])])])])])])])}const xe=$(he,[["render",Te]]);export{xe as default};
