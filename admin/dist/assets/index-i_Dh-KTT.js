import{d as w,a as u,v as f,$,_ as k,c as b,b as o,w as r,e as d,G as C,o as v,g,q as U,r as y,x as h,y as A,A as V,t as c}from"./index-bpNO_8uP.js";import{S as D,a as M}from"./SectionHeader-C4vtWxD-.js";import{S as i}from"./sweetalert2.esm.all-DzlfzZPw.js";const x=w({props:{open:{default:!1,type:Boolean}},data(){return{form:{name:"",price:0,stock:0}}},methods:{closeModal(){this.$emit("closed")},async saveItem(){await u.get(f().api_main+"inventory_stocks/create?"+$.param(this.form)).then(async s=>{var t,l,e;(t=s.data)!=null&&t.success?i.fire({title:"Success",text:(l=s.data)==null?void 0:l.message,icon:"success"}).then(async()=>{this.form.name="",this.form.price=0,this.form.stock=0,this.$emit("refresh")}):i.fire({title:"Warning",text:(e=s.data)==null?void 0:e.message,icon:"warning"})})}}}),B={class:"modal-dialog",role:"document"},N={class:"modal-content"},P={class:"modal-body",style:{"max-height":"calc(100vh - 300px)",overflow:"auto"}},H={class:"form-group"},L={class:"row"},j={class:"col-6"},q={class:"form-group mt-4"},O={class:"col-6"},R={class:"form-group mt-4"},T={class:"modal-footer"};function W(s,t,l,e,m,p){return v(),b("div",{class:C(["modal fade",{show:s.open,display:s.open}]),tabindex:"-1",role:"dialog"},[o("div",B,[o("div",N,[t[8]||(t[8]=o("div",{class:"modal-header"},[o("h5",{class:"modal-title"},"Add Inventory")],-1)),t[9]||(t[9]=o("hr",null,null,-1)),o("div",P,[o("div",H,[t[5]||(t[5]=o("label",null,"Inventory Name",-1)),r(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.form.name=a),type:"text",class:"form-control form-control-lg"},null,512),[[d,s.form.name]])]),o("div",L,[o("div",j,[o("div",q,[t[6]||(t[6]=o("label",null,"Inventory Stock",-1)),r(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.form.stock=a),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.stock]])])]),o("div",O,[o("div",R,[t[7]||(t[7]=o("label",null,"Price",-1)),r(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.form.price=a),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.price]])])])])]),o("div",T,[o("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[3]||(t[3]=a=>s.closeModal())},"Close"),o("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=a=>s.saveItem())},"Save")])])])],2)}const z=k(x,[["render",W],["__scopeId","data-v-6ca5fb1e"]]),E=w({components:{ModalCreateInventory:z,SectionSidebar:M,SectionHeader:D},data(){return{admin:{},modal:{create_open:!1},inventories:{},form:{}}},methods:{async fetchAllInventory(){await u.get(f().api_main+"inventory_stocks/fetchAll").then(async s=>{this.inventories=s.data})},async updateItem(){await u.get(f().api_main+"inventory_stocks/update?"+$.param(this.form)).then(async s=>{var t,l,e;(t=s.data)!=null&&t.success?i.fire({title:"Success",text:(l=s.data)==null?void 0:l.message,icon:"success"}).then(async()=>{this.form={},await this.fetchAllInventory()}):i.fire({title:"Warning",text:(e=s.data)==null?void 0:e.message,icon:"warning"})})},async deleteItem(s){await g().then(async t=>{(t==null?void 0:t.role)==1?i.fire({title:"Success",text:"Delete "+(s==null?void 0:s.name)+"?",icon:"question",showCancelButton:!0,confirmButtonText:"Delete"}).then(async l=>{l.isConfirmed&&await u.get(f().api_main+"inventory_stocks/delete?dataid="+(s==null?void 0:s.dataid)).then(async e=>{var m,p;(m=e.data)!=null&&m.success&&i.fire({title:"Success",text:(p=e.data)==null?void 0:p.message,icon:"success"}).then(async()=>{await this.fetchAllInventory()})})}):i.fire({title:"Action denied",text:"Only administrator level has permission to delete",icon:"error"})})}},async mounted(){await g().then(async s=>{s?(this.admin=s,await this.fetchAllInventory().then(async()=>{console.log("Inventory:",U(this.$data))})):this.$router.replace("/")})}}),F={class:"layout-wrapper layout-content-navbar"},G={class:"layout-container"},J={class:"layout-page"},K={class:"content-wrapper"},Q={class:"container-xxl flex-grow-1 container-p-y"},X={class:"d-flex justify-content-between align-items-center py-3"},Y={class:"d-flex"},Z={class:"row"},oo={class:"col-sm-12 col-md-4"},to={class:"card"},so={class:"card-body"},no={class:"mb-3"},eo={class:"row"},lo={class:"col-6"},ao={class:"mb-3"},ro={class:"col-6"},io={class:"mb-3"},co={class:"row"},mo={class:"col-6"},po={class:"mb-3"},uo={class:"col-6"},fo={class:"mb-3"},bo={class:"d-flex justify-content-end mt-4"},vo={class:"col-sm-12 col-md-8"},yo={class:"card"},ho={class:"table-responsive text-nowrap"},_o={class:"table"},go={class:"table-border-bottom-0"},wo={class:"btn btn-clear btn-sm px-0"},$o={class:"me-2"},ko={class:"btn btn-clear btn-sm px-0"},Io={class:"me-2"},So={class:"btn btn-clear btn-sm px-0"},Co={class:"me-2"},Uo={class:"btn btn-clear btn-sm px-0"},Ao={class:"me-2"},Vo=["onClick"],Do=["onClick"];function Mo(s,t,l,e,m,p){const a=h("SectionSidebar"),I=h("SectionHeader"),S=h("ModalCreateInventory");return v(),b("div",F,[o("div",G,[y(a),o("div",J,[y(I,{onOpen_notif:t[0]||(t[0]=()=>{s.$emit("open_notif")})}),o("div",K,[o("div",Q,[o("div",X,[t[10]||(t[10]=o("h4",{class:"fw-bold py-3"},"Manage Inventory",-1)),o("div",Y,[o("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=()=>{s.modal.create_open=!0})},"Add Inventory")])]),o("div",Z,[o("div",oo,[o("div",to,[t[16]||(t[16]=o("h5",{class:"card-header"},"Update Inventory",-1)),o("div",so,[o("div",no,[t[11]||(t[11]=o("label",{class:"form-label"},"Name",-1)),r(o("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.form.name=n),type:"text",class:"form-control form-control-lg"},null,512),[[d,s.form.name]])]),o("div",eo,[o("div",lo,[o("div",ao,[t[12]||(t[12]=o("label",{class:"form-label"},"Price",-1)),r(o("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.form.price=n),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.price]])])]),o("div",ro,[o("div",io,[t[13]||(t[13]=o("label",{class:"form-label"},"Stock",-1)),r(o("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.form.stock=n),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.stock]])])])]),o("div",co,[o("div",mo,[o("div",po,[t[14]||(t[14]=o("label",{class:"form-label"},"Lost",-1)),r(o("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.form.lost=n),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.lost]])])]),o("div",uo,[o("div",fo,[t[15]||(t[15]=o("label",{class:"form-label"},"Damage",-1)),r(o("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.form.damage=n),type:"number",class:"form-control form-control-lg"},null,512),[[d,s.form.damage]])])]),o("div",bo,[o("button",{class:"btn btn-primary btn-lg w-50",onClick:t[7]||(t[7]=n=>s.updateItem())},"Update")])])])])]),o("div",vo,[o("div",yo,[t[18]||(t[18]=o("h5",{class:"card-header"},"Manage Inventory",-1)),o("div",ho,[o("table",_o,[t[17]||(t[17]=o("thead",null,[o("tr",null,[o("th",{style:{width:"50px"}},"No."),o("th",null,"Name"),o("th",null,"Price"),o("th",null,"Stock"),o("th",null,"Lost"),o("th",null,"Damage"),o("th",{style:{width:"100px"}},"Update"),o("th",{style:{width:"100px"}},"Delete")])],-1)),o("tbody",go,[(v(!0),b(A,null,V(s.inventories,(n,_)=>(v(),b("tr",{key:_},[o("td",null,c(_+1),1),o("td",null,c(n==null?void 0:n.name),1),o("td",null,[o("button",wo,[o("span",$o,"PHP "+c(n!=null&&n.price?n==null?void 0:n.price:"0.00"),1)])]),o("td",null,[o("button",ko,[o("span",Io,c(n!=null&&n.stock?n==null?void 0:n.stock:"0.00"),1)])]),o("td",null,[o("button",So,[o("span",Co,c(n!=null&&n.lost?n==null?void 0:n.lost:"0.00"),1)])]),o("td",null,[o("button",Uo,[o("span",Ao,c(n!=null&&n.damage?n==null?void 0:n.damage:"0.00"),1)])]),o("td",null,[o("button",{class:"btn btn-primary btn-sm",onClick:()=>{s.form=n}},"Update",8,Vo)]),o("td",null,[o("button",{class:"btn btn-danger btn-sm",onClick:xo=>s.deleteItem(n)},"Delete",8,Do)])]))),128))])])])])])])])])])]),y(S,{open:s.modal.create_open,onClosed:t[8]||(t[8]=()=>{s.modal.create_open=!1}),onRefresh:t[9]||(t[9]=n=>s.fetchAllInventory())},null,8,["open"])])}const Ho=k(E,[["render",Mo]]);export{Ho as default};
