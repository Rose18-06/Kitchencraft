import{d as S,a as b,v as $,$ as U,_ as h,c as u,b as t,w as a,e as i,K as y,G as C,o as c,g as _,q as D,r as v,x as g,I as B,y as N,A as R,t as p}from"./index-bpNO_8uP.js";import{S as I,a as E}from"./SectionHeader-C4vtWxD-.js";import{S as r}from"./sweetalert2.esm.all-DzlfzZPw.js";const L=S({emits:["closed","refresh"],props:{open:{default:!1,type:Boolean},staff:{default:{},type:Object}},data(){return{confirm_password:""}},methods:{closeModal(){this.$emit("closed")},async updateStaff(){await b.get($().api_main+"users_system/update?"+U.param(this.staff)).then(async s=>{var o,n,d;(o=s.data)!=null&&o.success?r.fire({title:"Success",text:(n=s.data)==null?void 0:n.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):r.fire({title:"Warning",text:(d=s.data)==null?void 0:d.message,icon:"warning"})})}}}),F={class:"modal-dialog modal-lg",role:"document"},H={class:"modal-content"},O={class:"modal-body bg-light-gray",style:{"max-height":"calc(100vh - 300px)",overflow:"auto"}},T={class:"card"},W={class:"card-body"},j={class:"row mt-4"},P={class:"col-sm-12 col-md-4"},q={class:"form-group"},z={class:"col-sm-12 col-md-4"},G={class:"form-group"},K={class:"col-sm-12 col-md-4"},J={class:"form-group"},Q={class:"row mt-4"},X={class:"col-sm-12 col-md-6"},Y={class:"form-group"},Z={class:"col-sm-12 col-md-6"},x={class:"form-group"},tt={class:"row mt-4"},ot={class:"col-sm-12 col-md-6"},st={class:"form-group"},et={class:"col-sm-12 col-md-6"},lt={class:"form-group"},at={class:"modal-footer"};function nt(s,o,n,d,m,f){return c(),u("div",{class:C(["modal fade",{show:s.open,display:s.open}]),tabindex:"-1",role:"dialog"},[t("div",F,[t("div",H,[o[18]||(o[18]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Update Staff")],-1)),t("div",O,[t("div",T,[t("div",W,[t("div",j,[t("div",P,[t("div",q,[o[9]||(o[9]=t("label",null,"First name",-1)),a(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.staff.first_name=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.first_name]])])]),t("div",z,[t("div",G,[o[10]||(o[10]=t("label",null,"Last name",-1)),a(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.staff.last_name=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.last_name]])])]),t("div",K,[t("div",J,[o[11]||(o[11]=t("label",null,"Mobile No.",-1)),a(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.staff.contact=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.contact]])])])]),t("div",Q,[t("div",X,[t("div",Y,[o[12]||(o[12]=t("label",null,"Email",-1)),a(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.staff.email=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.email]])])]),t("div",Z,[t("div",x,[o[14]||(o[14]=t("label",null,"Role",-1)),a(t("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.staff.role=e),class:"form-control form-control-lg"},[...o[13]||(o[13]=[t("option",{value:"0"},"Select role",-1),t("option",{value:"1"},"Admin",-1),t("option",{value:"2"},"Staff",-1)])],512),[[y,s.staff.role]])])])]),t("div",tt,[t("div",ot,[t("div",st,[o[15]||(o[15]=t("label",null,"Password",-1)),a(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.staff.password=e),type:"password",class:"form-control form-control-lg"},null,512),[[i,s.staff.password]])])]),t("div",et,[t("div",lt,[o[17]||(o[17]=t("label",null,"Status",-1)),a(t("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.staff.status=e),class:"form-control form-control-lg"},[...o[16]||(o[16]=[t("option",{value:"0"},"Select status",-1),t("option",{value:"1"},"Active",-1),t("option",{value:"2"},"Inactive",-1)])],512),[[y,s.staff.status]])])])])])])]),t("div",at,[t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:o[7]||(o[7]=e=>s.closeModal())},"Close"),t("button",{type:"button",class:"btn btn-primary",onClick:o[8]||(o[8]=e=>s.updateStaff())},"Register Staff")])])])],2)}const dt=h(L,[["render",nt],["__scopeId","data-v-f3b16d82"]]),it=S({emits:["closed","refresh"],props:{open:{default:!1,type:Boolean}},data(){return{staff:{first_name:"",last_name:"",email:"",contact:"",password:"",role:0,status:0}}},methods:{closeModal(){this.$emit("closed")},async registerStaff(){await b.get($().api_main+"users_system/create?"+U.param(this.staff)).then(async s=>{var o,n,d;(o=s.data)!=null&&o.success?r.fire({title:"Success",text:(n=s.data)==null?void 0:n.message,icon:"success"}).then(async()=>{this.staff.first_name="",this.staff.last_name="",this.staff.email="",this.staff.contact="",this.staff.password="",this.staff.role=0,this.staff.status=0,this.$emit("refresh")}):r.fire({title:"Warning",text:(d=s.data)==null?void 0:d.message,icon:"warning"})})}}}),rt={class:"modal-dialog modal-lg",role:"document"},mt={class:"modal-content"},ft={class:"modal-body bg-light-gray",style:{"max-height":"calc(100vh - 300px)",overflow:"auto"}},pt={class:"card"},ut={class:"card-body"},ct={class:"row mt-4"},vt={class:"col-sm-12 col-md-4"},gt={class:"form-group"},bt={class:"col-sm-12 col-md-4"},$t={class:"form-group"},yt={class:"col-sm-12 col-md-4"},St={class:"form-group"},ht={class:"row mt-4"},wt={class:"col-sm-12 col-md-6"},_t={class:"form-group"},Ut={class:"col-sm-12 col-md-6"},Ct={class:"form-group"},Vt={class:"row mt-4"},Mt={class:"col-sm-12 col-md-6"},kt={class:"form-group"},At={class:"col-sm-12 col-md-6"},Dt={class:"form-group"},Bt={class:"modal-footer"};function Nt(s,o,n,d,m,f){return c(),u("div",{class:C(["modal fade",{show:s.open,display:s.open}]),tabindex:"-1",role:"dialog"},[t("div",rt,[t("div",mt,[o[18]||(o[18]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Update Staff")],-1)),t("div",ft,[t("div",pt,[t("div",ut,[t("div",ct,[t("div",vt,[t("div",gt,[o[9]||(o[9]=t("label",null,"First name",-1)),a(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.staff.first_name=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.first_name]])])]),t("div",bt,[t("div",$t,[o[10]||(o[10]=t("label",null,"Last name",-1)),a(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.staff.last_name=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.last_name]])])]),t("div",yt,[t("div",St,[o[11]||(o[11]=t("label",null,"Mobile No.",-1)),a(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.staff.contact=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.contact]])])])]),t("div",ht,[t("div",wt,[t("div",_t,[o[12]||(o[12]=t("label",null,"Email",-1)),a(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.staff.email=e),type:"text",class:"form-control form-control-lg"},null,512),[[i,s.staff.email]])])]),t("div",Ut,[t("div",Ct,[o[14]||(o[14]=t("label",null,"Role",-1)),a(t("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.staff.role=e),class:"form-control form-control-lg"},[...o[13]||(o[13]=[t("option",{value:"0"},"Select role",-1),t("option",{value:"1"},"Admin",-1),t("option",{value:"2"},"Staff",-1)])],512),[[y,s.staff.role]])])])]),t("div",Vt,[t("div",Mt,[t("div",kt,[o[15]||(o[15]=t("label",null,"Password",-1)),a(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.staff.password=e),type:"password",class:"form-control form-control-lg"},null,512),[[i,s.staff.password]])])]),t("div",At,[t("div",Dt,[o[17]||(o[17]=t("label",null,"Status",-1)),a(t("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.staff.status=e),class:"form-control form-control-lg"},[...o[16]||(o[16]=[t("option",{value:"0"},"Select status",-1),t("option",{value:"1"},"Active",-1),t("option",{value:"2"},"Inactive",-1)])],512),[[y,s.staff.status]])])])])])])]),t("div",Bt,[t("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:o[7]||(o[7]=e=>s.closeModal())},"Close"),t("button",{type:"button",class:"btn btn-primary",onClick:o[8]||(o[8]=e=>s.registerStaff())},"Register Staff")])])])],2)}const Rt=h(it,[["render",Nt],["__scopeId","data-v-56d68821"]]),It=S({components:{ModalAddStaff:Rt,ModalUpdateStaff:dt,SectionSidebar:E,SectionHeader:I},data(){return{admin:{},list:{},modal:{update:{open:!1,staff:{}},create:{open:!1}}}},methods:{async addStaff(){await _().then(async s=>{(s==null?void 0:s.role)==1?this.modal.create.open=!0:r.fire({title:"Action denied",text:"Only administrator level has permission to add a staff",icon:"error"})})},async fetchStaff(){await b.get($().api_main+"users_system/fetchAll").then(async s=>{this.list=s.data})},onStaffUpdate(s){this.modal.update.staff=s,this.modal.update.open=!0},onStaffDelete(s){r.fire({title:"Confirmation",text:"Delete "+(s==null?void 0:s.first_name)+" "+(s==null?void 0:s.last_name)+"?",showCancelButton:!0,icon:"warning",confirmButtonText:"Delete"}).then(async o=>{o.isConfirmed&&await b.get($().api_main+"users_system/delete?dataid="+(s==null?void 0:s.dataid)).then(async n=>{var d,m,f;(d=n.data)!=null&&d.success?r.fire({title:"Success",text:(m=n.data)==null?void 0:m.message,icon:"success"}).then(async()=>{await this.fetchStaff()}):r.fire({title:"Warning",text:(f=n.data)==null?void 0:f.message,icon:"warning"})})})}},async mounted(){await _().then(async s=>{s?(this.admin=s,await this.fetchStaff().then(async()=>{console.log("Staff:",D(this.$data))})):this.$router.replace("/")})}}),Et={class:"layout-wrapper layout-content-navbar"},Lt={class:"layout-container"},Ft={class:"layout-page"},Ht={class:"content-wrapper"},Ot={class:"container-xxl flex-grow-1 container-p-y"},Tt={class:"d-flex justify-content-between align-items-center py-3"},Wt={class:"d-flex"},jt={class:"card"},Pt={class:"table-responsive text-nowrap"},qt={class:"table"},zt={class:"table-border-bottom-0"},Gt=["onClick"],Kt=["onClick"];function Jt(s,o,n,d,m,f){const e=g("SectionSidebar"),V=g("SectionHeader"),M=g("ModalUpdateStaff"),k=g("ModalAddStaff");return c(),u("div",Et,[t("div",Lt,[v(e),t("div",Ft,[v(V,{onOpen_notif:o[0]||(o[0]=()=>{s.$emit("open_notif")})}),t("div",Ht,[t("div",Ot,[t("div",Tt,[o[6]||(o[6]=t("h4",{class:"fw-bold py-3 mb-4"},[t("span",{class:"text-muted fw-light"},"Staff /"),B(" Masterlist")],-1)),t("div",Wt,[t("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=l=>s.addStaff())},"Add Staff")])]),t("div",jt,[o[8]||(o[8]=t("h5",{class:"card-header"},"Manage Staff",-1)),t("div",Pt,[t("table",qt,[o[7]||(o[7]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Name"),t("th",null,"Contact"),t("th",null,"Email/Username"),t("th",null,"Status"),t("th",{style:{width:"100px"}},"Update"),t("th",{style:{width:"100px"}},"Delete")])],-1)),t("tbody",zt,[(c(!0),u(N,null,R(s.list,(l,w)=>(c(),u("tr",{key:w},[t("td",null,p(w+1),1),t("td",null,p((l==null?void 0:l.last_name)+" "+(l==null?void 0:l.first_name)),1),t("td",null,p(l==null?void 0:l.contact),1),t("td",null,p(l==null?void 0:l.email),1),t("td",null,p((l==null?void 0:l.status)==1?"Active":"Inactive"),1),t("td",null,[t("button",{class:"btn btn-primary btn-sm",onClick:A=>s.onStaffUpdate(l)},"Update",8,Gt)]),t("td",null,[t("button",{class:"btn btn-danger btn-sm",onClick:A=>s.onStaffDelete(l)},"Delete",8,Kt)])]))),128))])])])])])])])]),v(M,{open:s.modal.update.open,staff:s.modal.update.staff,onClosed:o[2]||(o[2]=()=>{s.modal.update.open=!1}),onRefresh:o[3]||(o[3]=l=>s.fetchStaff())},null,8,["open","staff"]),v(k,{open:s.modal.create.open,onClosed:o[4]||(o[4]=()=>{s.modal.create.open=!1}),onRefresh:o[5]||(o[5]=l=>s.fetchStaff())},null,8,["open"])])}const Zt=h(It,[["render",Jt]]);export{Zt as default};
