import{d as $,g as C,a as b,v,_ as h,c as f,b as s,y as k,A as j,o as w,t as S,w as a,e as r,$ as _,r as l,x as p,C as L,D as O,q as N,E as y}from"./index-bpNO_8uP.js";import{S as B,a as R}from"./SectionHeader-C4vtWxD-.js";import{t as W}from"./formatter-Cd5PYes5.js";import{S as m}from"./sweetalert2.esm.all-DzlfzZPw.js";import{C as V}from"./CardPhotoUploader-D4nm50iS.js";const H=$({emits:["view","update","refresh"],props:{addons:{},type:Object},methods:{onView(o){this.$emit("view",{add_on:o})},onUpdate(o){this.$emit("update",{add_on:o})},toCurrencyFormat(o){return W(o)},async onDelete(o){await C().then(async t=>{(t==null?void 0:t.role)==1?m.fire({title:"Confirmation",text:"Delete "+(o==null?void 0:o.name)+"?",icon:"question",showCancelButton:!0,confirmButtonText:"Delete"}).then(async i=>{i.isConfirmed&&await b.get(v().api_main+"add_ons/delete?dataid="+(o==null?void 0:o.dataid)).then(async d=>{var c,u,e;(c=d.data)!=null&&c.success?m.fire({title:"Success",text:(u=d.data)==null?void 0:u.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):m.fire({title:"Warning",text:(e=d.data)==null?void 0:e.message,icon:"warning"})})}):m.fire({title:"Action denied",text:"Only administrator level has permission to delete",icon:"error"})})}}}),M={class:"card"},q={class:"table-responsive text-nowrap"},x={class:"table"},E=["onClick"],z=["onClick"],G=["onClick"];function I(o,t,i,d,c,u){return w(),f("div",M,[t[1]||(t[1]=s("h5",{class:"card-header"},"Manage Add-ons",-1)),s("div",q,[s("table",x,[t[0]||(t[0]=s("thead",null,[s("tr",null,[s("th",{style:{width:"50px"}},"No."),s("th",null,"Add-ons"),s("th",null,"Price"),s("th",{style:{width:"100px"}},"View"),s("th",{style:{width:"100px"}},"Update"),s("th",{style:{width:"100px"}},"Delete")])],-1)),s("tbody",null,[(w(!0),f(k,null,j(o.addons,(e,n)=>(w(),f("tr",null,[s("td",null,S(n+1),1),s("td",null,S(e==null?void 0:e.name),1),s("td",null,S(o.toCurrencyFormat(e==null?void 0:e.price)),1),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:g=>o.onView(e)},"View",8,E)]),s("td",null,[s("button",{class:"btn btn-primary btn-sm",onClick:g=>o.onUpdate(e)},"Update",8,z)]),s("td",null,[s("button",{class:"btn btn-danger btn-sm",onClick:g=>o.onDelete(e)},"Delete",8,G)])]))),256))])])])])}const J=h(H,[["render",I]]),K=$({props:{addon:{default:{},type:Object}}}),Q={class:"card"},X=["src"],Y={class:"card-body"},Z={class:"form-group"},oo={class:"form-group mt-2"},to={class:"row"},so={class:"col-sm-12 col-md-6"},eo={class:"form-group mt-2"},no={class:"col-sm-12 col-md-6"},io={class:"form-group mt-2"};function lo(o,t,i,d,c,u){return w(),f("div",Q,[t[8]||(t[8]=s("h5",{class:"card-header"},"View Add-ons",-1)),s("img",{src:o.addon.photo?"https://api-fileserver.jlipreso.com/"+o.addon.photo:"https://www.menuprice.app/assets/img/nn.png"},null,8,X),s("div",Y,[s("div",Z,[t[4]||(t[4]=s("label",null,"Add-ons Name",-1)),a(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.addon.name=e),type:"text",class:"form-control form-control-lg bg-white",readonly:""},null,512),[[r,o.addon.name]])]),s("div",oo,[t[5]||(t[5]=s("label",null,"Description",-1)),a(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.addon.description=e),class:"form-control form-control-lg bg-white",style:{"min-height":"140px"},readonly:""},null,512),[[r,o.addon.description]])]),s("div",to,[s("div",so,[s("div",eo,[t[6]||(t[6]=s("label",null,"Price",-1)),a(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.addon.price=e),type:"text",class:"form-control form-control-lg bg-white",readonly:""},null,512),[[r,o.addon.price]])])]),s("div",no,[s("div",io,[t[7]||(t[7]=s("label",null,"Sale Price",-1)),a(s("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.addon.priceSale=e),type:"text",class:"form-control form-control-lg bg-white",readonly:""},null,512),[[r,o.addon.priceSale]])])])])])])}const ao=h(K,[["render",lo]]),ro=$({emits:["refresh"],components:{CardPhotoUploader:V},data(){return{form:{name:"",description:"",price:0,priceSale:0,photo:"",status:1}}},methods:{async saveAddOns(){await b.get(v().api_main+"add_ons/create?"+_.param(this.form)).then(async o=>{var t,i,d;(t=o.data)!=null&&t.success?m.fire({title:"Success",text:(i=o.data)==null?void 0:i.message,icon:"success"}).then(async()=>{this.form.name="",this.form.description="",this.form.price=0,this.form.priceSale=0,this.form.photo="",this.$emit("refresh")}):m.fire({title:"Warning",text:(d=o.data)==null?void 0:d.message,icon:"warning"})})},onUploadSuccess(o){var t;this.form.photo=(t=o==null?void 0:o.data)==null?void 0:t.filepath},onUploadFail(o){m.fire({title:"Warning",text:"Fail to upload photo, try again later.",icon:"warning"})}}}),po={class:"card"},mo={class:"card-body"},co={class:"form-group"},uo={class:"form-group mt-2"},fo={class:"row"},wo={class:"col-sm-12 col-md-6"},$o={class:"form-group mt-2"},ho={class:"col-sm-12 col-md-6"},go={class:"form-group mt-2"},yo={class:"d-flex justify-content-end mt-4"};function bo(o,t,i,d,c,u){const e=p("CardPhotoUploader");return w(),f("div",po,[t[9]||(t[9]=s("h5",{class:"card-header"},"Add Add-ons",-1)),l(e,{onUploaded:o.onUploadSuccess,onFail:o.onUploadFail},null,8,["onUploaded","onFail"]),s("div",mo,[s("div",co,[t[5]||(t[5]=s("label",null,"Add-ons Name",-1)),a(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.form.name=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.form.name]])]),s("div",uo,[t[6]||(t[6]=s("label",null,"Description",-1)),a(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.form.description=n),class:"form-control form-control-lg"},null,512),[[r,o.form.description]])]),s("div",fo,[s("div",wo,[s("div",$o,[t[7]||(t[7]=s("label",null,"Price",-1)),a(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.form.price=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.form.price]])])]),s("div",ho,[s("div",go,[t[8]||(t[8]=s("label",null,"Sale Price",-1)),a(s("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.form.priceSale=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.form.priceSale]])])])]),s("div",yo,[s("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=n=>o.saveAddOns())},"Save")])])])}const vo=h(ro,[["render",bo]]),Uo=$({emits:["refresh"],components:{CardPhotoUploader:V},props:{addon:{default:{},type:Object}},methods:{onUploadSuccess(o){var t;this.addon.photo=(t=o==null?void 0:o.data)==null?void 0:t.filepath},onUploadFail(o){m.fire({title:"Warning",text:"Fail to upload photo, try again later.",icon:"warning"})},async updateAddons(){await b.get(v().api_main+"add_ons/update?"+_.param(this.addon)).then(async o=>{var t,i,d;(t=o.data)!=null&&t.success?m.fire({title:"Success",text:(i=o.data)==null?void 0:i.message,icon:"success"}).then(async()=>{this.$emit("refresh")}):m.fire({title:"Warning",text:(d=o.data)==null?void 0:d.message,icon:"warning"})})}}}),Ao={class:"card"},So={class:"card-body"},Co={class:"form-group"},_o={class:"form-group mt-2"},Vo={class:"row"},To={class:"col-sm-12 col-md-6"},Fo={class:"form-group mt-2"},Do={class:"col-sm-12 col-md-6"},Po={class:"form-group mt-2"},ko={class:"d-flex justify-content-end mt-4"};function jo(o,t,i,d,c,u){const e=p("CardPhotoUploader");return w(),f("div",Ao,[t[9]||(t[9]=s("h5",{class:"card-header"},"Update Add-ons",-1)),l(e,{onUploaded:o.onUploadSuccess,onFail:o.onUploadFail,btn_upload_text:"Replace"},null,8,["onUploaded","onFail"]),s("div",So,[s("div",Co,[t[5]||(t[5]=s("label",null,"Add-ons Name",-1)),a(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.addon.name=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.addon.name]])]),s("div",_o,[t[6]||(t[6]=s("label",null,"Description",-1)),a(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.addon.description=n),class:"form-control form-control-lg",style:{"min-height":"60px"}},null,512),[[r,o.addon.description]])]),s("div",Vo,[s("div",To,[s("div",Fo,[t[7]||(t[7]=s("label",null,"Price",-1)),a(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.addon.price=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.addon.price]])])]),s("div",Do,[s("div",Po,[t[8]||(t[8]=s("label",null,"Sale Price",-1)),a(s("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.addon.priceSale=n),type:"text",class:"form-control form-control-lg"},null,512),[[r,o.addon.priceSale]])])]),s("div",ko,[s("button",{class:"btn btn-primary w-50",onClick:t[4]||(t[4]=n=>o.updateAddons())},"Update")])])])])}const Lo=h(Uo,[["render",jo]]),Oo=$({components:{CardAddonsView:ao,Swiper:O,SwiperSlide:L,CardAddonsUpdate:Lo,CardAddonsAdd:vo,TableAddons:J,SectionSidebar:R,SectionHeader:B},data(){return{swiper:{},admin:{},addons:{},addon:{}}},methods:{onSwiper(o){this.swiper=o},swipeToView(o){this.addon=o.add_on,this.swiper.slideTo(0)},swipeToUpdate(o){this.addon=o.add_on,this.swiper.slideTo(2)},swipeToAdd(){this.swiper.slideTo(1)},async fetchAddonsList(){await b.get(v().api_main+"add_ons/fetchAll").then(async o=>{this.addons=o.data})}},async mounted(){await C().then(async o=>{o?(this.admin=o,await this.fetchAddonsList().then(async()=>{console.log("Addons:",N(this.$data))})):this.$router.replace("/")})}}),No={class:"layout-wrapper layout-content-navbar"},Bo={class:"layout-container"},Ro={class:"layout-page"},Wo={class:"content-wrapper"},Ho={class:"container-xxl flex-grow-1 container-p-y"},Mo={class:"d-flex justify-content-between align-items-center py-0"},qo={class:"d-flex"},xo={class:"row"},Eo={class:"col-sm-12 col-md-5"},zo={class:"col-sm-12 col-md-7"};function Go(o,t,i,d,c,u){const e=p("SectionSidebar"),n=p("SectionHeader"),g=p("CardAddonsView"),U=p("swiper-slide"),T=p("CardAddonsAdd"),F=p("CardAddonsUpdate"),D=p("swiper"),P=p("TableAddons");return w(),f("div",No,[s("div",Bo,[l(e),s("div",Ro,[l(n,{onOpen_notif:t[0]||(t[0]=()=>{o.$emit("open_notif")})}),s("div",Wo,[s("div",Ho,[s("div",Mo,[t[5]||(t[5]=s("h4",{class:"fw-bold py-3"},"Manage Add-ons",-1)),s("div",qo,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=A=>o.swipeToAdd())},"Add Add-ons")])]),s("div",xo,[s("div",Eo,[l(D,{"slides-per-view":1,"space-between":50,onSwiper:o.onSwiper},{default:y(()=>[l(U,{class:"swiper-no-swiping"},{default:y(()=>[l(g,{addon:o.addon},null,8,["addon"])]),_:1}),l(U,{class:"swiper-no-swiping"},{default:y(()=>[l(T,{onRefresh:t[2]||(t[2]=A=>o.fetchAddonsList())})]),_:1}),l(U,{class:"swiper-no-swiping"},{default:y(()=>[l(F,{addon:o.addon,onRefresh:t[3]||(t[3]=A=>o.fetchAddonsList())},null,8,["addon"])]),_:1})]),_:1},8,["onSwiper"])]),s("div",zo,[l(P,{addons:o.addons,onView:o.swipeToView,onUpdate:o.swipeToUpdate,onRefresh:t[4]||(t[4]=A=>o.fetchAddonsList())},null,8,["addons","onView","onUpdate"])])])])])])])])}const Yo=h(Oo,[["render",Go]]);export{Yo as default};
